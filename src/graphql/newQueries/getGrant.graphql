fragment ProjectData on Project {
  id
  profileId
  name
  status
  owner
  metadata {
    pointer
  }
  members {
    addresses
  }
}

fragment GrantUpdate on Update {
  id
  tag
  playerType
  entityAddress
  postedBy
  message
  content {
    pointer
  }
  contentSchema
  timestamp
}

query getGrant($grantId: String!, $projectId: String!, $shipSrc: String!) {
  Project_by_pk(id: $projectId) {
    ...ProjectData
  }
  GrantShip(where: { shipContractAddress: { _eq: $shipSrc } }, limit: 1) {
    ...BaseShipData
    beaconMessage {
      pointer
    }
    customApplication {
      pointer
    }
  }
  Grant_by_pk(id: $grantId) {
    id
  }
  Update(where: { hostEntityId: { _eq: $grantId } }) {
    ...GrantUpdate
  }
  Application(where: { grant_id: { _eq: $grantId } }) {
    id
  }
  MilestoneSet(where: { grant_id: { _eq: $grantId } }) {
    id
  }
}
